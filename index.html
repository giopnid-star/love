<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–∞—Ç–∏–º–∞, —Ç—ã –±—É–¥–µ—à—å –º–æ–µ–π?</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="hearts" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>

    <div class="petals" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>

    <main class="hero">
        <section class="card invite-card">
            <p class="date">14 —Ñ–µ–≤—Ä–∞–ª—è 2026</p>
            <div class="kitten-sticker" aria-hidden="true">
                <video class="kitten-video" src="WhatsApp Video 2026-02-14 at 19.02.45.mp4" autoplay muted loop playsinline></video>
                <span class="heart h1">‚ù§Ô∏è</span>
                <span class="heart h2">‚ú®</span>
                <span class="heart h3">‚ù§Ô∏è</span>
            </div>
            <h1><span class="name-highlight">–§–∞—Ç–∏–º–∞</span>, —Ç—ã –±—É–¥–µ—à—å –º–æ–µ–π –≤ –¥–µ–Ω—å –í–∞–ª–µ–Ω—Ç–∏–Ω–∞?</h1>
            <p class="subtitle">–í—ã–±–∏—Ä–∞–π —Å–µ—Ä–¥—Ü–µ–º ‚ù§Ô∏è</p>

            <div class="answer-row" id="answerRow">
                <button class="answer-btn yes-btn" id="yesBtn" type="button">–î–∞ ‚ù§Ô∏è</button>
                <button class="answer-btn no-btn" id="noBtn" type="button">–ù–µ—Ç</button>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
    <script>
        const yesButton = document.getElementById('yesBtn');
        const noButton = document.getElementById('noBtn');
        const answerRow = document.getElementById('answerRow');
        const subtitle = document.querySelector('.subtitle');
        let isNavigating = false;

        let noClicks = 0;
        const maxNoClicks = 7;
        const noMessages = [
            '–¢—ã —É–≤–µ—Ä–µ–Ω–∞? ‚ú®',
            '–¢–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω–∞? ‚ù§Ô∏è',
            '–ú–æ–∂–µ—Ç –≤—Å—ë-—Ç–∞–∫–∏ ¬´–î–∞¬ª? üå∑',
            '–ü–æ–¥—É–º–∞–π –µ—â—ë —Ä–∞–∑, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ üí´',
            '–ù—É –ø—Ä–∞–≤–¥–∞, —Ç—ã –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞ –¥–ª—è –º–µ–Ω—è ‚ù§Ô∏è',
            '–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –Ω–∞–∂–∞—Ç—å ¬´–î–∞¬ª ‚ú®',
            '–°–µ—Ä–¥—Ü–µ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å ¬´–î–∞¬ª ‚ù§Ô∏è'
        ];

        yesButton.addEventListener('click', () => {
            if (isNavigating) {
                return;
            }

            isNavigating = true;
            yesButton.disabled = true;
            noButton.disabled = true;

            if (typeof window.navigateWithHearts === 'function') {
                window.navigateWithHearts('/main.html', yesButton);

                setTimeout(() => {
                    window.location.assign('/main.html');
                }, 720);

                setTimeout(() => {
                    window.location.replace('/main.html');
                }, 1150);
                return;
            }

            window.location.replace('/main.html');
        });

        noButton.addEventListener('click', () => {
            noClicks += 1;

            if (typeof window.burstHeartsAtPoint === 'function') {
                const rect = noButton.getBoundingClientRect();
                const originX = rect.left + rect.width / 2;
                const originY = rect.top + rect.height / 2;
                const maxDistance = Math.hypot(window.innerWidth, window.innerHeight) * 0.7;

                for (let i = 0; i < 140; i += 1) {
                    const heart = document.createElement('span');
                    heart.className = 'click-heart';

                    const angle = Math.random() * Math.PI * 2;
                    const distance = 90 + Math.random() * maxDistance;
                    const driftX = Math.cos(angle) * distance;
                    const driftY = Math.sin(angle) * distance;
                    const scale = (0.75 + Math.random() * 0.9).toFixed(2);
                    const rotation = `${Math.floor(Math.random() * 80 - 40)}deg`;

                    heart.style.left = `${originX + (Math.random() - 0.5) * 12}px`;
                    heart.style.top = `${originY + (Math.random() - 0.5) * 12}px`;
                    heart.style.setProperty('--drift-x', `${driftX.toFixed(1)}px`);
                    heart.style.setProperty('--drift-y', `${driftY.toFixed(1)}px`);
                    heart.style.setProperty('--heart-scale', scale);
                    heart.style.setProperty('--heart-rotate', rotation);
                    heart.style.animationDelay = `${(Math.random() * 0.22).toFixed(2)}s`;

                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 1300);
                }
            }

            if (subtitle) {
                const messageIndex = Math.min(noClicks - 1, noMessages.length - 1);
                subtitle.textContent = noMessages[messageIndex];
            }

            const yesScale = 1 + noClicks * 0.16;
            yesButton.style.transform = `scale(${yesScale})`;

            const noScale = Math.max(0.38, 1 - noClicks * 0.09);
            noButton.style.transform = `scale(${noScale})`;
            noButton.style.opacity = '1';

            if (noClicks >= maxNoClicks) {
                noButton.classList.add('hidden-no');
                yesButton.classList.add('only-yes');
                answerRow.classList.add('only-yes-row');
            }
        });
    </script>
</body>
</html>